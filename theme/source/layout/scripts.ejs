<%
// Load Any Error Messages

var jsErrors = {};

var errors = get_data('errors');
var errorList = page.errors || [];
errorList.push('default');

for(var key of errorList){
  jsErrors = lngScan(errors[key]);
}

jsErrors = JSON.stringify(jsErrors);

var scripts = loadScripts();
%>

<script>

window.agneta = {
  page:{
    version: "<%-getVersion()%>"
  },
  lang: "<%-site.lang%>",
  locale: "<%-site.locale%>",
  path: "<%-path_relative()%>",
  root: "<%-config.root%>",
  title: "<%-lng(config.title)%>",
  server:{
    lib: "<%-site.servers.lib%>",
    media: "<%-site.servers.media%>",
    assets: "<%-site.servers.assets%>"
  },
  keys:{
    googleAPI: "<%-services_config('google').api%>",
    recaptcha: "<%-services_config('google').recaptcha%>"
  },
  <%if(config.search){%>
  urls:{
    keywords: "<%-get_asset('generated/keywords_' + site.lang + '.json')%>"
  },
  <%}%>
  <%if(site.services){%>
    services: {
      url: "<%-site.services.url%>",
      host: "<%-site.services.host%>",
      view: "<%-site.services.view%>",
      token: "<%-services_config('token').name%>"
    },
    <%}%>
    url_web: "<%-site.url_web%>",
    host: "<%-site.host_web%>",
    theme: {
      primary: "<%-config.colors.primary%>",
      accent: "<%-config.colors.accent%>"
    }
  };

  agneta.errors = JSON.parse('<%-jsErrors%>');
  window.angularDeps = [<%-scripts.angularDeps%>];

  window.require = function(name){
    return window[name];
  };

  </script>

  <%-js('main/bundle')%>
