<%if(page.barebones){%>
  <%-body%>
<%}else{%>
  <!DOCTYPE html>
  <html <%-page.html_attributes%> lang="<%-site.lang%>" ng-app="MainApp">
    <%- template('layout/head') %>

    <body <%-page.body_attributes%> ng-class="[viewData.layoutClass,sidebarClass(),loggedClass(),mediaClass()]" layout="column" ng-keypress="viewData.keypress && onKeyPress($event)" dynamic-ctrl="viewData.controller">

      <%-template('layout/compatibility',null,true)%>
      <%-template('layout/loader',null,true)%>

      <div class="page-loader" ng-hide="loggedClass">
        <div class="loader">Loading...</div>
      </div>

      <div layout="column" flex="100" ng-cloak>

        <%
    var toolbar = config.toolbar || {};
    if(!toolbar.disabled && !page.hiddenToolbar){
      %>
          <%-template('layout/toolbar',{post:page},true)%>
        <%}%>

          <%-template('layout/wrap',null,true)%>

        <%-template('layout/notifications')%>

      </div>

      <%-template('layout/scripts')%>
      <%if(has_template('layout/body-end')){%>
      <%-template('layout/body-end')%>
      <%}%>

    </body>
  </html>
<%}%>
